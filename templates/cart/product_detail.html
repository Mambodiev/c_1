{% extends "base.html" %}
{% load i18n %}
{% load static %}
{% load crispy_forms_tags %}
{% load widget_tweaks %}
{% load blog_tags %}
{% block content %}



<div class="container">
  <ul class="breadcrumb">
    <li><a href="{% url 'home' %}">{% trans "Home" %}</a></li>
    <li>{{ product.title }}</li>
  </ul>

  <div class="col ">
    <div class="col product-detail">
        <div class="product-hero">
          <img id="featured" src="{{ product.featured.url }}" alt="Norway" style="width:100%">
          <div class="product-slider" id="slide-wrapper">
            <span id="slideLeft" class='arrow'>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
              </svg>
            </span>
            <div id="slider">
              {% for image in product.image_set.all %}
              <img class="thumbnail" src="{{image.imageURL}}">
              {% endfor %}
            </div>
            <span class='arrow' id="slideRight" >
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
              </sv24
            </span>
          </div>
        </div>
    </div>

    <div class="col product-detail-text">
        <div class='title'>
          <h1>{{ product.title }}</h1>
          <div class="product">
            <div class="product-rating" id="product-rating">
              <span class="{% if product.avaregereview < 1%}-o empty{% endif%}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                </svg>
              </span>
              <span class="{% if product.avaregereview < 2%}-o empty{% endif%}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                </svg>
              </span>
              <span class="{% if product.avaregereview < 3%}-o empty{% endif%}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                </svg>
              </span>
              <span class="{% if product.avaregereview < 4%}-o empty{% endif%}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                </svg>
              </span>
              <span class="{% if product.avaregereview < 5%}-o empty{% endif%}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                </svg>
              </span5
              <span class='ml-3'>{{ product.avaregereview |stringformat:".2f"}}<span>
            </div>
            <div>
              <a href="#tab1">{{ product.countreview}}  {% trans "Review(s) / Add Review" %}</a>
            </div>
          </div>
          <h3 class='product-detail-price'>US  ${{ product.get_price }}</h3>
          <p class='available-stock'>
            {% trans 'Available stock:' %} {{ product.stock }} {% trans 'Units' %}
          </p>
          {% if product.in_stock %}
          <form method="POST">
              {% csrf_token %}
            <div class="color-size" >
              <a>
                {{ form.colour.label_tag }}
                {{ form.colour|add_class:'form-colour' }}
              </a>

              <a>
                {{ form.size.label_tag }}
              {{ form.size|add_class:'form-size' }} 
              </a>
            </div>
            <div class="color-size" >
              <a>
                {{ form.quantity.label_tag }}
              {{ form.quantity|add_class:'form-quantity'}}
              </a>

                <button type="submit"  class="block">Add to Cart</button>
            </div>
              
              
              </div>
          </form><br>
          {% else %}
          <h5>{% trans 'This item is out of stock' %}</h5>
          {% endif %}
        </div>
    </div>
  </div>
</div>
<script>
  let thumbnails = document.getElementsByClassName('thumbnail')
			let activeImages = document.getElementsByClassName('active')
			for (var i=0; i < thumbnails.length; i++){
				thumbnails[i].addEventListener('mouseover', function(){
					if (activeImages.length > 0){
						activeImages[0].classList.remove('active')
					}
					this.classList.add('active')
					document.getElementById('featured').src = this.src
				})
			}
			const buttonRight = document.getElementById('slideRight');
			const buttonLeft = document.getElementById('slideLeft');
			buttonRight.addEventListener('click', function(){
				document.getElementById('slider').scrollLeft += 180;
		    })
		    buttonLeft.addEventListener('click', function(){
		      document.getElementById('slider').scrollLeft -= 180;
		    })
</script>
{% endblock content %}